{"version":3,"sources":["../src/common.js"],"names":["_","Common","endpoints","allTableTableName","annotationTs","annotationColIndex","annotationColAll","annotationTable","strings","allOperators","filteredCol","numTypes","aggPrefix","toDate","someDate","timeString","_d","_i","Date","parse","getAuthDict","user","pass","tenant","auth","passwordCredentials","username","password","tenantName","processAuthResponse","resp","response","data","status","access","token","id","expire","expires","processResultData","result","newData","each","value","d","i","time","T","v","k","push","config","select_fields","filterQueryFields","targetObj","whereArray","advanced","where","filter","andRowArray","innerArray","andRow","j","op","name","toLowerCase","indexOf","value2","length","filterObj","selCol","selectColumn","selFilterOp","filterVal","filterVal2","isValidQuery","table","isAggregateField","fieldName","undefined","index","transform","processAnnotationResult","options","alarm","hasOwnProperty","UVEAlarms","alarms","singleAnnotation","annotation","enabled","enable","datasource","title","alarmUVEName","alarmNodeName","timestamp","text","description","tags","severity","type","node","titleMapping","textMapping","tagMapping"],"mappings":";;;;;;;;;AAuBOA,O;;;;;;;;AADDC,Y,GAAS,E;;yBAEAA,M;;AACf;AACAA,aAAOC,SAAP,GAAmB;AACjB,iBAAS,kBADQ;AAEjB,kBAAU,mBAFO;AAGjB,iBAAS,kBAHQ;AAIjB,uBAAe,SAJE;AAKjB,iBAAS;AALQ,OAAnB;AAOAD,aAAOE,iBAAP,GAA2B,6BAA3B;AACAF,aAAOG,YAAP,GAAsB,WAAtB;AACAH,aAAOI,kBAAP,GAA4B,CAAC,WAAD,EAAc,QAAd,EAAwB,UAAxB,EAAoC,UAApC,EAAgD,aAAhD,EAA+D,aAA/D,EAA8E,YAA9E,EAA4F,MAA5F,CAA5B;AACAJ,aAAOK,gBAAP,GAA0B,CAAC,WAAD,EAAc,QAAd,EAAwB,UAAxB,EAAoC,UAApC,EAAgD,OAAhD,EAAyD,YAAzD,EAAuE,UAAvE,EAAmF,aAAnF,EAAkG,YAAlG,CAA1B;AACAL,aAAOM,eAAP,GAAyB,cAAzB;AACAN,aAAOO,OAAP,GAAiB;AACf,uBAAe,cADA;AAEf,wBAAgB;AAFD,OAAjB;AAIAP,aAAOQ,YAAP,GAAsB,CAAC,OAAD,EAAU,WAAV,EAAuB,UAAvB,EAAmC,cAAnC,EAAmD,KAAnD,EAA0D,KAA1D,EAAiE,QAAjE,EAA2E,aAA3E,CAAtB;AACAR,aAAOS,WAAP,GAAqB,CAAC,GAAD,EAAM,IAAN,EAAY,UAAZ,EAAwB,WAAxB,CAArB;AACAT,aAAOU,QAAP,GAAkB,CAAC,KAAD,EAAQ,MAAR,EAAgB,aAAhB,EAA+B,QAA/B,EAAyC,KAAzC,CAAlB;AACAV,aAAOW,SAAP,GAAmB,CAAC,MAAD,EAAS,MAAT,EAAiB,MAAjB,EAAyB,MAAzB,EAAiC,cAAjC,EAAiD,QAAjD,CAAnB;AACAX,aAAOY,MAAP,GAAgB,UAAUC,QAAV,EAAoB;AAClC,YAAIA,aAAa,IAAb,IAAqB,QAAOA,QAAP,yCAAOA,QAAP,OAAoB,QAA7C,EAAuD;AACrD,cAAMC,aAAaD,SAASE,EAAT,IAAeF,SAASG,EAA3C;AACA,iBAAOC,KAAKC,KAAL,CAAWJ,UAAX,IAAyB,IAAhC;AACD;AACD;AACA;AACA;AACD,OARD;AASAd,aAAOmB,WAAP,GAAqB,UAAUC,IAAV,EAAgBC,IAAhB,EAAwC;AAAA,YAAlBC,MAAkB,uEAAT,OAAS;;AAC3D,eAAO,EAACC,MAAM,EAACC,qBAAqB,EAACC,UAAUL,IAAX;AAClCM,wBAAUL,IADwB,EAAtB;AAEZM,wBAAYL,MAFA,EAAP,EAAP;AAGD,OAJD;AAKAtB,aAAO4B,mBAAP,GAA6B,UAAUC,IAAV,EAAgB;AAC3C,YAAMC,WAAWD,KAAKE,IAAtB;AACA,YAAIF,KAAKG,MAAL,KAAgB,GAAhB,IAAuBF,SAASG,MAAT,IAAmB,IAA9C,EAAoD;AAClD,iBAAO,EAACC,OAAOJ,SAASG,MAAT,CAAgBC,KAAhB,CAAsBC,EAA9B;AACLC,oBAAQN,SAASG,MAAT,CAAgBC,KAAhB,CAAsBG;AADzB,WAAP;AAGD;AACD,eAAO,IAAP;AACD,OARD;AASArC,aAAOsC,iBAAP,GAA2B,UAAUC,MAAV,EAAkB;AACzC;AACF,YAAMC,UAAU,EAAhB;AACAzC,UAAE0C,IAAF,CAAOF,OAAOR,IAAP,CAAYW,KAAnB,EAA0B,UAACC,CAAD,EAAIC,CAAJ,EAAU;AAClC,cAAMC,OAAOF,EAAEG,CAAF,IAAOH,EAAE,IAAF,CAApB;AACA5C,YAAE0C,IAAF,CAAOE,CAAP,EAAU,UAACI,CAAD,EAAIC,CAAJ,EAAU;AAClB,gBAAIA,MAAM,GAAN,IACAA,MAAM,IADN,IAEAA,MAAM,WAFN,IAGAA,MAAM,UAHV,EAGsB;AAAER,sBAAQS,IAAR,CAAa,CAACF,CAAD,EAAIF,OAAO,IAAX,CAAb;AAAiC;AAC1D,WALD;AAMD,SARD;AASA,eAAO,EAAC,UAAUN,OAAOW,MAAP,CAAcnB,IAAd,CAAmBoB,aAAnB,CAAiC,CAAjC,CAAX,EAAgD,cAAcX,OAA9D,EAAP;AACD,OAbD;AAcAxC,aAAOoD,iBAAP,GAA2B,UAAUC,SAAV,EAAqB;AAC9C,YAAMC,aAAa,EAAnB;AACA,YAAI,CAACD,UAAUE,QAAf,EAAyB;AACvBF,oBAAUG,KAAV,GAAkB,IAAlB;AACAH,oBAAUI,MAAV,GAAmB,IAAnB;AACD,SAHD,MAGO;AACL1D,YAAE0C,IAAF,CAAOY,UAAUC,UAAjB,EAA6B,UAACI,WAAD,EAAcd,CAAd,EAAoB;AAC/C,gBAAMe,aAAa,EAAnB;AACA5D,cAAE0C,IAAF,CAAOiB,WAAP,EAAoB,UAACE,MAAD,EAASC,CAAT,EAAe;AACjC,kBAAI,CAACD,OAAOE,EAAR,IACA,CAACF,OAAOG,IADR,IAEA,CAACH,OAAOlB,KAFR,IAGCkB,OAAOE,EAAP,IACCF,OAAOE,EAAP,CAAUE,WAAV,GAAwBC,OAAxB,CAAgC,OAAhC,MAA6C,CAAC,CAD/C,IAEC,CAACL,OAAOM,MALd,EAMM;AAAE,uBAAO,KAAP;AAAe;AACvBP,yBAAWV,IAAX,CAAgB;AACdc,sBAAMH,OAAOG,IADC;AAEdD,oBAAIF,OAAOE,EAFG;AAGdpB,uBAAOkB,OAAOlB,KAHA;AAIdwB,wBAAQN,OAAOM;AAJD,eAAhB;AAMD,aAdD;AAeA,gBAAIP,WAAWQ,MAAX,KAAsB,CAA1B,EAA6B;AAAE,qBAAO,KAAP;AAAe;AAC9Cb,uBAAWL,IAAX,CAAgBU,UAAhB;AACD,WAnBD;AAoBAN,oBAAUG,KAAV,GAAkBF,WAAWa,MAAX,KAAsB,CAAtB,GAA0B,IAA1B,GAAiCb,UAAnD;AACA,cAAMc,YAAYf,UAAUe,SAA5B;AACAf,oBAAUI,MAAV,GAAmBW,SAAnB;AACA,cAAI,CAACf,UAAUgB,MAAX,IACIhB,UAAUgB,MAAV,KAAqBrE,OAAOO,OAAP,CAAe+D,YADxC,IAEI,CAACF,SAFL,IAGI,CAACA,UAAUG,WAHf,IAII,CAACH,UAAUI,SAJf,IAKKJ,UAAUG,WAAV,IACGH,UAAUG,WAAV,CAAsBP,WAAtB,GAAoCC,OAApC,CAA4C,OAA5C,MAAyD,CAAC,CAD7D,IAEG,CAACG,UAAUK,UAPvB,EAOoC;AAAEpB,sBAAUI,MAAV,GAAmB,IAAnB;AAA0B;AACjE;AACD,eAAOJ,SAAP;AACD,OAvCD;AAwCArD,aAAO0E,YAAP,GAAsB,UAAUrB,SAAV,EAAqB;AACzC,YAAI,CAACA,UAAUsB,KAAX,IACA,CAACtB,UAAUgB,MADX,IAEA,CAAChB,UAAUgB,MAAX,KAAsBrE,OAAOO,OAAP,CAAe+D,YAFzC,EAEuD;AAAE,iBAAO,KAAP;AAAe;AACxE,eAAO,IAAP;AACD,OALD;AAMAtE,aAAO4E,gBAAP,GAA0B,UAAUC,SAAV,EAAqB;AAC7C,YAAIA,cAAcC,SAAd,IAA2BD,cAAc,IAA7C,EAAmD;AAAE,iBAAO,KAAP;AAAe;AACpE,aAAK,IAAIE,QAAQ,CAAjB,EAAoBA,QAAQ/E,OAAOW,SAAP,CAAiBwD,MAA7C,EAAqD,EAAEY,KAAvD,EAA8D;AAC5D,cAAIF,UAAUZ,OAAV,CAAkBjE,OAAOW,SAAP,CAAiBoE,KAAjB,CAAlB,MAA+C,CAAnD,EAAsD;AAAE,mBAAO,IAAP;AAAc;AACvE;AACD,eAAO,KAAP;AACD,OAND;AAOA/E,aAAOgF,SAAP,GAAmB,UAAU3B,SAAV,EAAqB;AACtC,YAAIA,UAAUI,MAAd,EAAsB;AACpBJ,oBAAUI,MAAV,GAAmB,CAAC;AAClBM,kBAAMV,UAAUgB,MADE;AAElB3B,mBAAOW,UAAUI,MAAV,CAAiBe,SAFN;AAGlBN,oBAAQb,UAAUI,MAAV,CAAiBgB,UAHP;AAIlBX,gBAAI9D,OAAOQ,YAAP,CAAoByD,OAApB,CAA4BZ,UAAUI,MAAV,CAAiBc,WAA7C,IAA4D;AAJ9C,WAAD,CAAnB;AAMD;AACD,YAAIlB,UAAUG,KAAd,EAAqB;AACnBzD,YAAE0C,IAAF,CAAOY,UAAUG,KAAjB,EAAwB,UAACE,WAAD,EAAcd,CAAd,EAAoB;AAC1C7C,cAAE0C,IAAF,CAAOiB,WAAP,EAAoB,UAACE,MAAD,EAASC,CAAT,EAAe;AACjCR,wBAAUG,KAAV,CAAgBZ,CAAhB,EAAmBiB,CAAnB,EAAsBE,IAAtB,GAA6BV,UAAUG,KAAV,CAAgBZ,CAAhB,EAAmBiB,CAAnB,EAAsBE,IAAnD;AACAV,wBAAUG,KAAV,CAAgBZ,CAAhB,EAAmBiB,CAAnB,EAAsBC,EAAtB,GAA2B9D,OAAOQ,YAAP,CAAoByD,OAApB,CAA4BZ,UAAUG,KAAV,CAAgBZ,CAAhB,EAAmBiB,CAAnB,EAAsBC,EAAlD,IAAwD,CAAnF;AACD,aAHD;AAID,WALD;AAMD;AACD,eAAOT,SAAP;AACD,OAlBD;AAmBArD,aAAOiF,uBAAP,GAAiC,UAAU1C,MAAV,EAAkB2C,OAAlB,EAA2B;AAC1D,YAAM1C,UAAU,EAAhB;AACA,YAAID,OAAOP,MAAP,KAAkB,GAAtB,EAA2B;AAAE,iBAAOQ,OAAP;AAAiB;AAC9C,YAAI0C,QAAQC,KAAZ,EAAmB;AACjB,cAAI5C,OAAOR,IAAP,CAAYqD,cAAZ,CAA2B,WAA3B,CAAJ,EAA6C;AAC3CrF,cAAE0C,IAAF,CAAOF,OAAOR,IAAP,CAAYsD,SAAZ,CAAsBC,MAA7B,EAAqC,UAAC3C,CAAD,EAAIC,CAAJ,EAAU;AAC7C,kBAAM2C,mBAAmB;AACvBC,4BAAY;AACVzB,wBAAMmB,QAAQnB,IADJ;AAEV0B,2BAASP,QAAQQ,MAFP;AAGVC,8BAAYT,QAAQS;AAHV,iBADW;AAMvBC,uBAAOV,QAAQW,YAAR,GAAuB,IAAvB,GAA8BX,QAAQY,aANtB;AAOvBjD,sBAAMF,EAAEoD,SAAF,GAAc,IAPG;AAQvBC,sBAAMrD,EAAEsD,WARe;AASvBC,sBAAM,CAAC,eAAevD,EAAEwD,QAAlB,EAA4BxD,EAAEyD,IAA9B;AATiB,eAAzB;AAWA5D,sBAAQS,IAAR,CAAasC,gBAAb;AACD,aAbD;AAcD,WAfD,MAeO,IAAIhD,OAAOR,IAAP,CAAYqD,cAAZ,CAA2B,OAA3B,CAAJ,EAAyC;AAC9CrF,cAAE0C,IAAF,CAAOF,OAAOR,IAAP,CAAYW,KAAnB,EAA0B,UAAC2D,IAAD,EAAOzD,CAAP,EAAa;AACrC7C,gBAAE0C,IAAF,CAAO4D,KAAK3D,KAAL,CAAW2C,SAAX,CAAqBC,MAA5B,EAAoC,UAAC3C,CAAD,EAAIkB,CAAJ,EAAU;AAC5C,oBAAM0B,mBAAmB;AACvBC,8BAAY;AACVzB,0BAAMmB,QAAQnB,IADJ;AAEV0B,6BAASP,QAAQQ,MAFP;AAGVC,gCAAYT,QAAQS;AAHV,mBADW;AAMvBC,yBAAOS,KAAKtC,IANW;AAOvBlB,wBAAMF,EAAEoD,SAAF,GAAc,IAPG;AAQvBC,wBAAMrD,EAAEsD,WARe;AASvBC,wBAAM,CAAC,eAAevD,EAAEwD,QAAlB,EAA4BxD,EAAEyD,IAA9B;AATiB,iBAAzB;AAWA5D,wBAAQS,IAAR,CAAasC,gBAAb;AACD,eAbD;AAcD,aAfD;AAgBD;AACF,SAlCD,MAkCO;AACLxF,YAAE0C,IAAF,CAAOF,OAAOR,IAAP,CAAYW,KAAnB,EAA0B,UAACC,CAAD,EAAIC,CAAJ,EAAU;AAClC,gBAAM2C,mBAAmB;AACvBC,0BAAY;AACVzB,sBAAMmB,QAAQnB,IADJ;AAEV0B,yBAASP,QAAQQ,MAFP;AAGVC,4BAAYT,QAAQS;AAHV,eADW;AAMvBC,qBAAOjD,EAAEuC,QAAQoB,YAAV,CANgB;AAOvBzD,oBAAMF,EAAE3C,OAAOG,YAAT,IAAyB,IAPR;AAQvB6F,oBAAMrD,EAAEuC,QAAQqB,WAAV,CARiB;AASvBL,oBAAMvD,EAAEuC,QAAQsB,UAAV;AATiB,aAAzB;AAWAhE,oBAAQS,IAAR,CAAasC,gBAAb;AACD,WAbD;AAcD;AACD,eAAO/C,OAAP;AACD,OAtDD","file":"common.js","sourcesContent":["// The MIT License (MIT)\n\n// Copyright 2017, Juniper Networks, Inc.\n\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n\n// The above copyright notice and this permission notice shall be included in all\n// copies or substantial portions of the Software.\n\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n// SOFTWARE.\n\nconst Common = {};\nimport _ from 'lodash';\nexport default Common;\n// class Common {}\nCommon.endpoints = {\n  'query': '/analytics/query',\n  'tables': '/analytics/tables',\n  'table': '/analytics/table',\n  'tableSchema': '/schema',\n  'alarm': '/analytics/uves'\n};\nCommon.allTableTableName = 'StatTable.FieldNames.fields';\nCommon.annotationTs = 'MessageTS';\nCommon.annotationColIndex = ['MessageTS', 'Source', 'ModuleId', 'Category', 'Messagetype', 'SequenceNum', 'Xmlmessage', 'Type'];\nCommon.annotationColAll = ['MessageTS', 'Source', 'ModuleId', 'Category', 'Level', 'InstanceId', 'NodeType', 'Messagetype', 'Xmlmessage'];\nCommon.annotationTable = 'MessageTable';\nCommon.strings = {\n  'selectTable': 'Select Table',\n  'selectColumn': 'Select Field'\n};\nCommon.allOperators = ['EQUAL', 'NOT_EQUAL', 'IN_RANGE', 'NOT_IN_RANGE', 'LEQ', 'GEQ', 'PREFIX', 'REGEX_MATCH'];\nCommon.filteredCol = ['t', 't=', 'class(t)', 'class(t=)'];\nCommon.numTypes = ['int', 'long', 'percentiles', 'double', 'avg'];\nCommon.aggPrefix = ['SUM(', 'AVG(', 'MIN(', 'MAX(', 'PERCENTILES(', 'COUNT('];\nCommon.toDate = function (someDate) {\n  if (someDate !== null && typeof someDate === 'object') {\n    const timeString = someDate._d || someDate._i;\n    return Date.parse(timeString) * 1000;\n  }\n  // else if (someDate !== null && typeof someDate === 'string') {\n  //   return datemath().parse(someDate) * 1000;\n  // }\n};\nCommon.getAuthDict = function (user, pass, tenant = 'admin') {\n  return {auth: {passwordCredentials: {username: user,\n    password: pass},\n    tenantName: tenant}};\n};\nCommon.processAuthResponse = function (resp) {\n  const response = resp.data;\n  if (resp.status === 200 && response.access != null) {\n    return {token: response.access.token.id,\n      expire: response.access.token.expires\n    };\n  }\n  return null;\n};\nCommon.processResultData = function (result) {\n    // TODO: normalize data here\n  const newData = [];\n  _.each(result.data.value, (d, i) => {\n    const time = d.T || d['T='];\n    _.each(d, (v, k) => {\n      if (k !== 'T' &&\n          k !== 'T=' &&\n          k !== 'CLASS(T=)' &&\n          k !== 'CLASS(T)') { newData.push([v, time / 1000]); }\n    });\n  });\n  return {'target': result.config.data.select_fields[1], 'datapoints': newData};\n};\nCommon.filterQueryFields = function (targetObj) {\n  const whereArray = [];\n  if (!targetObj.advanced) {\n    targetObj.where = null;\n    targetObj.filter = null;\n  } else {\n    _.each(targetObj.whereArray, (andRowArray, i) => {\n      const innerArray = [];\n      _.each(andRowArray, (andRow, j) => {\n        if (!andRow.op ||\n            !andRow.name ||\n            !andRow.value ||\n            (andRow.op &&\n              andRow.op.toLowerCase().indexOf('range') !== -1 &&\n              !andRow.value2)\n            ) { return false; }\n        innerArray.push({\n          name: andRow.name,\n          op: andRow.op,\n          value: andRow.value,\n          value2: andRow.value2\n        });\n      });\n      if (innerArray.length === 0) { return false; }\n      whereArray.push(innerArray);\n    });\n    targetObj.where = whereArray.length === 0 ? null : whereArray;\n    const filterObj = targetObj.filterObj;\n    targetObj.filter = filterObj;\n    if (!targetObj.selCol ||\n            targetObj.selCol === Common.strings.selectColumn ||\n            !filterObj ||\n            !filterObj.selFilterOp ||\n            !filterObj.filterVal ||\n            (filterObj.selFilterOp &&\n                filterObj.selFilterOp.toLowerCase().indexOf('range') !== -1 &&\n                !filterObj.filterVal2)) { targetObj.filter = null; }\n  }\n  return targetObj;\n};\nCommon.isValidQuery = function (targetObj) {\n  if (!targetObj.table ||\n      !targetObj.selCol ||\n      !targetObj.selCol === Common.strings.selectColumn) { return false; }\n  return true;\n};\nCommon.isAggregateField = function (fieldName) {\n  if (fieldName === undefined || fieldName === null) { return false; }\n  for (let index = 0; index < Common.aggPrefix.length; ++index) {\n    if (fieldName.indexOf(Common.aggPrefix[index]) === 0) { return true; }\n  }\n  return false;\n};\nCommon.transform = function (targetObj) {\n  if (targetObj.filter) {\n    targetObj.filter = [{\n      name: targetObj.selCol,\n      value: targetObj.filter.filterVal,\n      value2: targetObj.filter.filterVal2,\n      op: Common.allOperators.indexOf(targetObj.filter.selFilterOp) + 1\n    }];\n  }\n  if (targetObj.where) {\n    _.each(targetObj.where, (andRowArray, i) => {\n      _.each(andRowArray, (andRow, j) => {\n        targetObj.where[i][j].name = targetObj.where[i][j].name;\n        targetObj.where[i][j].op = Common.allOperators.indexOf(targetObj.where[i][j].op) + 1;\n      });\n    });\n  }\n  return targetObj;\n};\nCommon.processAnnotationResult = function (result, options) {\n  const newData = [];\n  if (result.status !== 200) { return newData; }\n  if (options.alarm) {\n    if (result.data.hasOwnProperty('UVEAlarms')) {\n      _.each(result.data.UVEAlarms.alarms, (d, i) => {\n        const singleAnnotation = {\n          annotation: {\n            name: options.name,\n            enabled: options.enable,\n            datasource: options.datasource\n          },\n          title: options.alarmUVEName + '\\\\' + options.alarmNodeName,\n          time: d.timestamp / 1000,\n          text: d.description,\n          tags: ['Severity: ' + d.severity, d.type]\n        };\n        newData.push(singleAnnotation);\n      });\n    } else if (result.data.hasOwnProperty('value')) {\n      _.each(result.data.value, (node, i) => {\n        _.each(node.value.UVEAlarms.alarms, (d, j) => {\n          const singleAnnotation = {\n            annotation: {\n              name: options.name,\n              enabled: options.enable,\n              datasource: options.datasource\n            },\n            title: node.name,\n            time: d.timestamp / 1000,\n            text: d.description,\n            tags: ['Severity: ' + d.severity, d.type]\n          };\n          newData.push(singleAnnotation);\n        });\n      });\n    }\n  } else {\n    _.each(result.data.value, (d, i) => {\n      const singleAnnotation = {\n        annotation: {\n          name: options.name,\n          enabled: options.enable,\n          datasource: options.datasource\n        },\n        title: d[options.titleMapping],\n        time: d[Common.annotationTs] / 1000,\n        text: d[options.textMapping],\n        tags: d[options.tagMapping]\n      };\n      newData.push(singleAnnotation);\n    });\n  }\n  return newData;\n};\n"]}