{"version":3,"sources":["../src/annotation_ctrl.js"],"names":["_","Common","GenericAnnotationsQueryCtrl","annontation","allCols","indexCols","getIndexCols","getAllCols","allOperators","selectedTable","annotationTable","datasource","getColumns","then","result","each","unfiltered","d","i","index","push","text","templateUrl"],"mappings":";;;;;;;;;;;;;;;AAsBOA,O;;AAEAC,Y;;;;;;;;;;;;;;;;;;;;;6CAEMC,2B;AAEX,+CAAc;AAAA;;AACZ,eAAKC,WAAL,GAAmB,EAAnB;AACA,eAAKC,OAAL,GAAe,IAAf;AACA,eAAKC,SAAL,GAAiB,IAAjB;AACA,eAAKA,SAAL,GAAiB,KAAKC,YAAL,EAAjB;AACA,eAAKF,OAAL,GAAe,KAAKG,UAAL,EAAf;AACD;;;;yCACc;AACb,mBAAON,OAAOO,YAAd;AACD;;;yCACc;AAAA;;AACb,gBAAI,KAAKH,SAAT,EACE,OAAO,KAAKA,SAAZ;AACF,gBAAII,gBAAgBR,OAAOS,eAA3B;AACA,mBAAO,KAAKC,UAAL,CAAgBC,UAAhB,CAA2BH,aAA3B,EAA0CI,IAA1C,CAA+C,UAACC,MAAD,EAAY;AAChE,oBAAKT,SAAL,GAAiB,EAAjB;AACAL,gBAAEe,IAAF,CAAOD,OAAOE,UAAd,EAA0B,UAACC,CAAD,EAAIC,CAAJ,EAAU;AAClC,oBAAID,EAAEE,KAAF,KAAY,IAAhB,EAAsB;AAAE,wBAAKd,SAAL,CAAee,IAAf,CAAoBH,EAAEI,IAAtB;AAA8B;AACvD,eAFD;AAGA,qBAAO,MAAKhB,SAAZ;AACD,aANM,CAAP;AAOD;;;uCACY;AAAA;;AACX,gBAAI,KAAKD,OAAT,EACE,OAAO,KAAKA,OAAZ;AACF,gBAAIK,gBAAgBR,OAAOS,eAA3B;AACA,mBAAO,KAAKC,UAAL,CAAgBC,UAAhB,CAA2BH,aAA3B,EAA0CI,IAA1C,CAA+C,UAACC,MAAD,EAAY;AAChE,qBAAKV,OAAL,GAAe,EAAf;AACAJ,gBAAEe,IAAF,CAAOD,OAAOE,UAAd,EAA0B,UAACC,CAAD,EAAIC,CAAJ,EAAU;AAClC,uBAAKd,OAAL,CAAagB,IAAb,CAAkBH,EAAEI,IAApB;AACD,eAFD;AAGA,qBAAO,OAAKjB,OAAZ;AACD,aANM,CAAP;AAOD;;;;;;;;AAEHF,kCAA4BoB,WAA5B,GAA0C,kCAA1C","file":"annotation_ctrl.js","sourcesContent":["// The MIT License (MIT)\n\n// Copyright 2017, Juniper Networks, Inc.\n\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n\n// The above copyright notice and this permission notice shall be included in all\n// copies or substantial portions of the Software.\n\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n// SOFTWARE.\n\nimport _ from 'lodash';\nimport './css/query-editor.css!';\nimport Common from './common';\n\nexport class GenericAnnotationsQueryCtrl {\n\n  constructor() {\n    this.annontation = {};\n    this.allCols = null;\n    this.indexCols = null;\n    this.indexCols = this.getIndexCols();\n    this.allCols = this.getAllCols();\n  }\n  getOperators() {\n    return Common.allOperators;\n  }\n  getIndexCols() {\n    if (this.indexCols)\n      return this.indexCols;\n    let selectedTable = Common.annotationTable;\n    return this.datasource.getColumns(selectedTable).then((result) => {\n      this.indexCols = [];\n      _.each(result.unfiltered, (d, i) => {\n        if (d.index === true) { this.indexCols.push(d.text); }\n      });\n      return this.indexCols;\n    });\n  }\n  getAllCols() {\n    if (this.allCols)\n      return this.allCols;\n    let selectedTable = Common.annotationTable;\n    return this.datasource.getColumns(selectedTable).then((result) => {\n      this.allCols = [];\n      _.each(result.unfiltered, (d, i) => {\n        this.allCols.push(d.text);\n      });\n      return this.allCols;\n    });\n  }\n}\nGenericAnnotationsQueryCtrl.templateUrl = 'partials/annotations.editor.html';\n\n"]}